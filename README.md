# Nacos API Gateway API动态网关实战

Nacos搭建Spring Cloud Gateway完成微服务 高性能架构搭建实战


### 实现的功能  
- API网关统一接口,根据路径转发到对应的微服务
- 负载均衡,将请求按照指定策略转发到对应的微服务
- 限流,访问次数限制,例如同IP每秒最多只访问一次
- 鉴权,在网关进行权限验证,无需将鉴权逻辑交给微服务,省去重复造轮子
- 动态路由,在Nacos配置中心修改路由规则,无需重启即可完成路由更新
- 健康检查，负载均衡器会自动跳过不健康的实例


可采用nacos集群或单机模式部署,推荐使用docker部署  
nacos在[docker](./docker)文件夹启动  
网关(本项目的docker)在[libs](./libs)启动 也可以直接运行本项目  

已经写好docker-compose.yml文件,直接运行后将route.json文件添加到nacos配置中心即可(项目启动会自动创建)

在运行好访问 http://localhost:8992/api/user/sss 即可查看鉴权拦截效果  
在运行后访问 http://localhost:8992/api/user/login 即可查看鉴权排除路由效果

### 健康检查机制

网关已配置健康检查功能，负载均衡器会定期检查后端服务实例的健康状态，默认每5秒检查一次。
如果某个服务实例不健康（返回非UP状态），负载均衡器会自动将其从服务列表中移除，
直到该实例恢复健康状态为止。

健康检查配置：
- 检查间隔：5秒
- 初始延迟：10秒
- 默认健康检查路径：/actuator/health

要使健康检查正常工作，后端服务需要启用与暴露health端点